---
- name: Testing LDAP
  hosts: localhost
  tasks:
    - name: Testing LDAP in 2.4 version
      ansible.controller.settings:
        controller_username: admin
        controller_password: redhat
        controller_host: 192.168.122.31
        validate_certs: false
        settings: 
          AUTH_LDAP_BIND_DN: "cn=admin,dc=ansible,dc=sbr"
          AUTH_LDAP_BIND_PASSWORD: "GoodNewsEveryone"
          AUTH_LDAP_GROUP_SEARCH:
            - "dc=ansible,dc=sbr"
            - "SCOPE_SUBTREE"
            - "(objectClass=Group)"
          AUTH_LDAP_GROUP_TYPE: "MemberDNGroupType"
          AUTH_LDAP_GROUP_TYPE_PARAMS:
            name_attr: "cn"
            member_attr: "member"
          AUTH_LDAP_SERVER_URI: "ldap://10.1.230.105:10389"
          AUTH_LDAP_START_TLS: false
          AUTH_LDAP_USER_ATTR_MAP:
            email: "mail"
            username: "uid"
            last_name: "sn"
            first_name: "givenName"
          AUTH_LDAP_USER_SEARCH:
            - "dc=ansible,dc=sbr"
            - "SCOPE_SUBTREE"
            - "(uid=%(user)s)"

